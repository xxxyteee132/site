var BASE="https://www.youtube.com/embed/",LINK_PARAMS="?enablejsapi=1&version=3&playerapiid=ytplayer&start=1&modestbranding=1&showinfo=0&rel=0&iv_load_policy=3&controls=0";export default()=>{var e=[],t=Array.from(document.querySelectorAll("[data-video]")),a=t.map((e=>e.closest('[data-hide-element=""]'))).filter((e=>e));t.forEach((e=>{var t=e.dataset.video,a=JSON.parse(e.dataset.videoOptions),s=document.createElement("iframe");s.src=BASE+t+((e,t)=>{var a=e.autoplay?1:0,s=e.mute?1:0,o=e.loop?1:0;return"".concat(LINK_PARAMS,"&autoplay=").concat(a,"&mute=").concat(s,"&loop=").concat(o,"&playlist=").concat(t)})(a,t),s.setAttribute("allow","autoplay"),e.appendChild(s);var o,i=e.closest("[data-video-container]"),l=e.closest("[data-block]"),r=i.querySelector("[data-video-btn]");a.autoplay&&(i.classList.remove("stop"),i.classList.add("play"));var c=()=>{i.classList.add("cli-idle-active")};o=setTimeout(c,2e3),i.addEventListener("mousemove",(()=>{if(i.classList.contains("stop"))return clearTimeout(o);i.classList.remove("cli-idle-active"),clearTimeout(o),o=setTimeout(c,2e3)})),i.addEventListener("mouseleave",(()=>{clearTimeout(o)})),r.addEventListener("click",(()=>{var e=!i.classList.contains("stop"),t=e?"pauseVideo":"playVideo";s.contentWindow.postMessage('{"event":"command","func":"'+t+'","args":""}',"*"),i.classList.remove(e?"play":"stop"),i.classList.add(e?"stop":"play"),l&&(l.classList.remove(e?"play":"stop"),l.classList.add(e?"stop":"play"))}))})),a.forEach(((t,a)=>{var s=new MutationObserver(((e,a)=>{if("none"===t.style.display){var s=t.querySelector("iframe");t.classList.remove("play"),t.classList.add("stop"),s.contentWindow.postMessage('{"event":"command","func":"pauseVideo","args":""}',"*"),a.disconnect(),a.observe(t,{attributes:!0})}}));s.observe(t,{attributes:!0}),e.push(s)})),window.addEventListener("beforeunload",(()=>{e.forEach((e=>e.disconnect()))}))};